<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>SMT.Theory.Base</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">--------------------------------------------------------------------------------</a>
<a id="82" class="Comment">-- Schmitty the Solver</a>
<a id="105" class="Comment">--</a>
<a id="108" class="Comment">-- Defines the `Theory` class. The implementation of SMT-LIB terms and scripts</a>
<a id="187" class="Comment">-- is parameterised by an instance of the `Theory` class, which determines the</a>
<a id="266" class="Comment">-- sorts, literals, and identifiers, as well as the links to the SMT-LIB version</a>
<a id="347" class="Comment">-- of the theory.</a>
<a id="365" class="Comment">--</a>
<a id="368" class="Comment">-- The `Theory` class provides the sorts, literals, and identifiers.</a>
<a id="437" class="Comment">-- Furthermore, it contains the machinery needed to convert models back to</a>
<a id="512" class="Comment">-- Agda terms: `Value` interprets the SMT sorts as Agda types, and `quoteSort`</a>
<a id="591" class="Comment">-- and `quoteValue` quote sorts and values to reflected Agda syntax.</a>
<a id="660" class="Comment">--</a>
<a id="663" class="Comment">-- Finally, the `interpValue` function can be used to adjust the reflected</a>
<a id="738" class="Comment">-- syntax, which can be used to keep the values in `Set`. For instance, see</a>
<a id="814" class="Comment">-- `SMT.Theories.Core.Base`.</a>
<a id="843" class="Comment">--------------------------------------------------------------------------------</a>

<a id="925" class="Keyword">module</a> <a id="932" href="SMT.Theory.Base.html" class="Module">SMT.Theory.Base</a> <a id="948" class="Keyword">where</a>

<a id="955" class="Keyword">open</a> <a id="960" class="Keyword">import</a> <a id="967" href="Data.List.html" class="Module">Data.List</a> <a id="977" class="Symbol">as</a> <a id="980" class="Module">List</a> <a id="985" class="Keyword">using</a> <a id="991" class="Symbol">(</a><a id="992" href="Agda.Builtin.List.html#148" class="Datatype">List</a><a id="996" class="Symbol">;</a> <a id="998" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">_∷_</a><a id="1001" class="Symbol">;</a> <a id="1003" href="Data.List.Base.html#10383" class="InductiveConstructor">[]</a><a id="1005" class="Symbol">)</a>
<a id="1007" class="Keyword">import</a> <a id="1014" href="Reflection.html" class="Module">Reflection</a> <a id="1025" class="Symbol">as</a> <a id="1028" class="Module">Rfl</a>
<a id="1032" class="Keyword">open</a> <a id="1037" class="Keyword">import</a> <a id="1044" href="Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="1061" class="Keyword">using</a> <a id="1067" class="Symbol">(</a><a id="1068" href="Relation.Nullary.html#1511" class="Record">Dec</a><a id="1071" class="Symbol">;</a> <a id="1073" href="Relation.Nullary.html#1648" class="InductiveConstructor">yes</a><a id="1076" class="Symbol">;</a> <a id="1078" href="Relation.Nullary.html#1685" class="InductiveConstructor">no</a><a id="1080" class="Symbol">)</a>
<a id="1082" class="Keyword">open</a> <a id="1087" class="Keyword">import</a> <a id="1094" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="1132" class="Keyword">using</a> <a id="1138" class="Symbol">(</a><a id="1139" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">_≡_</a><a id="1142" class="Symbol">;</a> <a id="1144" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="1148" class="Symbol">)</a>


<a id="1152" class="Keyword">record</a> <a id="Signature"></a><a id="1159" href="SMT.Theory.Base.html#1159" class="Record">Signature</a> <a id="1169" class="Symbol">{</a><a id="1170" href="SMT.Theory.Base.html#1170" class="Bound">Sort</a> <a id="1175" class="Symbol">:</a> <a id="1177" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="1180" class="Symbol">}</a> <a id="1182" class="Symbol">(</a><a id="1183" href="SMT.Theory.Base.html#1183" class="Bound">σ</a> <a id="1185" class="Symbol">:</a> <a id="1187" href="SMT.Theory.Base.html#1170" class="Bound">Sort</a><a id="1191" class="Symbol">)</a> <a id="1193" class="Symbol">:</a> <a id="1195" href="Agda.Primitive.html#326" class="Primitive">Set</a> <a id="1199" class="Keyword">where</a>
  <a id="1207" class="Keyword">field</a>
    <a id="Signature.ArgSorts"></a><a id="1217" href="SMT.Theory.Base.html#1217" class="Field">ArgSorts</a> <a id="1226" class="Symbol">:</a> <a id="1228" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1233" href="SMT.Theory.Base.html#1170" class="Bound">Sort</a>

<a id="1239" class="Keyword">open</a> <a id="1244" href="SMT.Theory.Base.html#1159" class="Module">Signature</a> <a id="1254" class="Keyword">public</a>


<a id="1263" class="Keyword">module</a> <a id="1270" href="SMT.Theory.Base.html#1270" class="Module">_</a> <a id="1272" class="Symbol">{</a><a id="1273" href="SMT.Theory.Base.html#1273" class="Bound">Sort</a> <a id="1278" class="Symbol">:</a> <a id="1280" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="1283" class="Symbol">}</a> <a id="1285" class="Keyword">where</a>

  <a id="1294" class="Keyword">infix</a> <a id="1300" class="Number">3</a> <a id="1302" href="SMT.Theory.Base.html#1309" class="Function Operator">_↦_</a>

  <a id="1309" href="SMT.Theory.Base.html#1309" class="Function Operator">_↦_</a> <a id="1313" class="Symbol">:</a> <a id="1315" class="Symbol">(</a><a id="1316" href="SMT.Theory.Base.html#1316" class="Bound">σs</a> <a id="1319" class="Symbol">:</a> <a id="1321" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1326" href="SMT.Theory.Base.html#1273" class="Bound">Sort</a><a id="1330" class="Symbol">)</a> <a id="1332" class="Symbol">(</a><a id="1333" href="SMT.Theory.Base.html#1333" class="Bound">σ</a> <a id="1335" class="Symbol">:</a> <a id="1337" href="SMT.Theory.Base.html#1273" class="Bound">Sort</a><a id="1341" class="Symbol">)</a> <a id="1343" class="Symbol">→</a> <a id="1345" href="SMT.Theory.Base.html#1159" class="Record">Signature</a> <a id="1355" href="SMT.Theory.Base.html#1333" class="Bound">σ</a>
  <a id="1359" href="SMT.Theory.Base.html#1359" class="Bound">Σ</a> <a id="1361" href="SMT.Theory.Base.html#1309" class="Function Operator">↦</a> <a id="1363" class="Symbol">_</a> <a id="1365" class="Symbol">=</a> <a id="1367" class="Keyword">record</a> <a id="1374" class="Symbol">{</a> <a id="1376" href="SMT.Theory.Base.html#1217" class="Field">ArgSorts</a> <a id="1385" class="Symbol">=</a> <a id="1387" href="SMT.Theory.Base.html#1359" class="Bound">Σ</a> <a id="1389" class="Symbol">}</a>

  <a id="1394" href="SMT.Theory.Base.html#1394" class="Function">Op₀</a> <a id="1398" class="Symbol">:</a> <a id="1400" class="Symbol">(</a><a id="1401" href="SMT.Theory.Base.html#1401" class="Bound">σ</a> <a id="1403" class="Symbol">:</a> <a id="1405" href="SMT.Theory.Base.html#1273" class="Bound">Sort</a><a id="1409" class="Symbol">)</a> <a id="1411" class="Symbol">→</a> <a id="1413" href="SMT.Theory.Base.html#1159" class="Record">Signature</a> <a id="1423" href="SMT.Theory.Base.html#1401" class="Bound">σ</a>
  <a id="1427" href="SMT.Theory.Base.html#1394" class="Function">Op₀</a> <a id="1431" href="SMT.Theory.Base.html#1431" class="Bound">σ</a> <a id="1433" class="Symbol">=</a> <a id="1435" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="1438" href="SMT.Theory.Base.html#1309" class="Function Operator">↦</a> <a id="1440" href="SMT.Theory.Base.html#1431" class="Bound">σ</a>

  <a id="1445" href="SMT.Theory.Base.html#1445" class="Function">Op₁</a> <a id="1449" class="Symbol">:</a> <a id="1451" class="Symbol">(</a><a id="1452" href="SMT.Theory.Base.html#1452" class="Bound">σ</a> <a id="1454" class="Symbol">:</a> <a id="1456" href="SMT.Theory.Base.html#1273" class="Bound">Sort</a><a id="1460" class="Symbol">)</a> <a id="1462" class="Symbol">→</a> <a id="1464" href="SMT.Theory.Base.html#1159" class="Record">Signature</a> <a id="1474" href="SMT.Theory.Base.html#1452" class="Bound">σ</a>
  <a id="1478" href="SMT.Theory.Base.html#1445" class="Function">Op₁</a> <a id="1482" href="SMT.Theory.Base.html#1482" class="Bound">σ</a> <a id="1484" class="Symbol">=</a> <a id="1486" href="SMT.Theory.Base.html#1482" class="Bound">σ</a> <a id="1488" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1490" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="1493" href="SMT.Theory.Base.html#1309" class="Function Operator">↦</a> <a id="1495" href="SMT.Theory.Base.html#1482" class="Bound">σ</a>

  <a id="1500" href="SMT.Theory.Base.html#1500" class="Function">Op₂</a> <a id="1504" class="Symbol">:</a> <a id="1506" class="Symbol">(</a><a id="1507" href="SMT.Theory.Base.html#1507" class="Bound">σ</a> <a id="1509" class="Symbol">:</a> <a id="1511" href="SMT.Theory.Base.html#1273" class="Bound">Sort</a><a id="1515" class="Symbol">)</a> <a id="1517" class="Symbol">→</a> <a id="1519" href="SMT.Theory.Base.html#1159" class="Record">Signature</a> <a id="1529" href="SMT.Theory.Base.html#1507" class="Bound">σ</a>
  <a id="1533" href="SMT.Theory.Base.html#1500" class="Function">Op₂</a> <a id="1537" href="SMT.Theory.Base.html#1537" class="Bound">σ</a> <a id="1539" class="Symbol">=</a> <a id="1541" href="SMT.Theory.Base.html#1537" class="Bound">σ</a> <a id="1543" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1545" href="SMT.Theory.Base.html#1537" class="Bound">σ</a> <a id="1547" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="1549" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="1552" href="SMT.Theory.Base.html#1309" class="Function Operator">↦</a> <a id="1554" href="SMT.Theory.Base.html#1537" class="Bound">σ</a>

  <a id="1559" href="SMT.Theory.Base.html#1559" class="Function">map</a> <a id="1563" class="Symbol">:</a> <a id="1565" class="Symbol">{</a><a id="1566" href="SMT.Theory.Base.html#1566" class="Bound">CoreSort</a> <a id="1575" class="Symbol">:</a> <a id="1577" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="1580" class="Symbol">}</a> <a id="1582" class="Symbol">{</a><a id="1583" href="SMT.Theory.Base.html#1583" class="Bound">φ</a> <a id="1585" class="Symbol">:</a> <a id="1587" href="SMT.Theory.Base.html#1566" class="Bound">CoreSort</a><a id="1595" class="Symbol">}</a> <a id="1597" class="Symbol">(</a><a id="1598" href="SMT.Theory.Base.html#1598" class="Bound">CORE</a> <a id="1603" class="Symbol">:</a> <a id="1605" href="SMT.Theory.Base.html#1566" class="Bound">CoreSort</a> <a id="1614" class="Symbol">→</a> <a id="1616" href="SMT.Theory.Base.html#1273" class="Bound">Sort</a><a id="1620" class="Symbol">)</a> <a id="1622" class="Symbol">→</a> <a id="1624" href="SMT.Theory.Base.html#1159" class="Record">Signature</a> <a id="1634" href="SMT.Theory.Base.html#1583" class="Bound">φ</a> <a id="1636" class="Symbol">→</a> <a id="1638" href="SMT.Theory.Base.html#1159" class="Record">Signature</a> <a id="1648" class="Symbol">(</a><a id="1649" href="SMT.Theory.Base.html#1598" class="Bound">CORE</a> <a id="1654" href="SMT.Theory.Base.html#1583" class="Bound">φ</a><a id="1655" class="Symbol">)</a>
  <a id="1659" href="SMT.Theory.Base.html#1559" class="Function">map</a> <a id="1663" href="SMT.Theory.Base.html#1663" class="Bound">CORE</a> <a id="1668" href="SMT.Theory.Base.html#1668" class="Bound">Φ</a> <a id="1670" class="Symbol">=</a> <a id="1672" class="Keyword">record</a> <a id="1679" class="Symbol">{</a> <a id="1681" href="SMT.Theory.Base.html#1217" class="Field">ArgSorts</a> <a id="1690" class="Symbol">=</a> <a id="1692" href="Data.List.Base.html#1544" class="Function">List.map</a> <a id="1701" href="SMT.Theory.Base.html#1663" class="Bound">CORE</a> <a id="1706" class="Symbol">(</a><a id="1707" href="SMT.Theory.Base.html#1217" class="Field">ArgSorts</a> <a id="1716" href="SMT.Theory.Base.html#1668" class="Bound">Φ</a><a id="1717" class="Symbol">)</a> <a id="1719" class="Symbol">}</a>


<a id="1723" class="Keyword">record</a> <a id="Theory"></a><a id="1730" href="SMT.Theory.Base.html#1730" class="Record">Theory</a> <a id="1737" class="Symbol">:</a> <a id="1739" href="Agda.Primitive.html#326" class="Primitive">Set₁</a> <a id="1744" class="Keyword">where</a>
  <a id="1752" class="Keyword">field</a>
    <a id="Theory.Sort"></a><a id="1762" href="SMT.Theory.Base.html#1762" class="Field">Sort</a>          <a id="1776" class="Symbol">:</a> <a id="1778" href="Agda.Primitive.html#326" class="Primitive">Set</a>
    <a id="Theory._≟-Sort_"></a><a id="1786" href="SMT.Theory.Base.html#1786" class="Field Operator">_≟-Sort_</a>      <a id="1800" class="Symbol">:</a> <a id="1802" class="Symbol">(</a><a id="1803" href="SMT.Theory.Base.html#1803" class="Bound">σ</a> <a id="1805" href="SMT.Theory.Base.html#1805" class="Bound">σ′</a> <a id="1808" class="Symbol">:</a> <a id="1810" href="SMT.Theory.Base.html#1762" class="Field">Sort</a><a id="1814" class="Symbol">)</a> <a id="1816" class="Symbol">→</a> <a id="1818" href="Relation.Nullary.html#1511" class="Record">Dec</a> <a id="1822" class="Symbol">(</a><a id="1823" href="SMT.Theory.Base.html#1803" class="Bound">σ</a> <a id="1825" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1827" href="SMT.Theory.Base.html#1805" class="Bound">σ′</a><a id="1829" class="Symbol">)</a>
    <a id="Theory.BOOL"></a><a id="1835" href="SMT.Theory.Base.html#1835" class="Field">BOOL</a>          <a id="1849" class="Symbol">:</a> <a id="1851" href="SMT.Theory.Base.html#1762" class="Field">Sort</a>
    <a id="Theory.Literal"></a><a id="1860" href="SMT.Theory.Base.html#1860" class="Field">Literal</a>       <a id="1874" class="Symbol">:</a> <a id="1876" href="SMT.Theory.Base.html#1762" class="Field">Sort</a> <a id="1881" class="Symbol">→</a> <a id="1883" href="Agda.Primitive.html#326" class="Primitive">Set</a>
    <a id="Theory.Identifier"></a><a id="1891" href="SMT.Theory.Base.html#1891" class="Field">Identifier</a>    <a id="1905" class="Symbol">:</a> <a id="1907" class="Symbol">{</a><a id="1908" href="SMT.Theory.Base.html#1908" class="Bound">σ</a> <a id="1910" class="Symbol">:</a> <a id="1912" href="SMT.Theory.Base.html#1762" class="Field">Sort</a><a id="1916" class="Symbol">}</a> <a id="1918" class="Symbol">→</a> <a id="1920" href="SMT.Theory.Base.html#1159" class="Record">Signature</a> <a id="1930" href="SMT.Theory.Base.html#1908" class="Bound">σ</a> <a id="1932" class="Symbol">→</a> <a id="1934" href="Agda.Primitive.html#326" class="Primitive">Set</a>
    <a id="Theory.quoteSort"></a><a id="1942" href="SMT.Theory.Base.html#1942" class="Field">quoteSort</a>     <a id="1956" class="Symbol">:</a> <a id="1958" href="SMT.Theory.Base.html#1762" class="Field">Sort</a> <a id="1963" class="Symbol">→</a> <a id="1965" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Rfl.Term</a>

    <a id="1979" class="Comment">-- The Value family encodes which Agda map interprets the values returned as</a>
    <a id="2060" class="Comment">-- part of a model:</a>
    <a id="2084" class="Comment">--</a>
    <a id="2091" class="Comment">--   * If the Agda equivalent is in Set₀, Value should return the type</a>
    <a id="2166" class="Comment">--     directly, and interpValue should be the identity function.</a>
    <a id="2236" class="Comment">--</a>
    <a id="2243" class="Comment">--   * If the Agda equivalent is *not* in Set₀, Value should return a</a>
    <a id="2317" class="Comment">--     universe encoding of the possible return values, and interpValue</a>
    <a id="2393" class="Comment">--     should map the elements of that universe encoding to their intended</a>
    <a id="2472" class="Comment">--     interpretation.</a>
    <a id="2499" class="Comment">--</a>
    <a id="Theory.Value"></a><a id="2506" href="SMT.Theory.Base.html#2506" class="Field">Value</a>       <a id="2518" class="Symbol">:</a> <a id="2520" href="SMT.Theory.Base.html#1762" class="Field">Sort</a> <a id="2525" class="Symbol">→</a> <a id="2527" href="Agda.Primitive.html#326" class="Primitive">Set</a>
    <a id="Theory.quoteValue"></a><a id="2535" href="SMT.Theory.Base.html#2535" class="Field">quoteValue</a>  <a id="2547" class="Symbol">:</a> <a id="2549" class="Symbol">(</a><a id="2550" href="SMT.Theory.Base.html#2550" class="Bound">σ</a> <a id="2552" class="Symbol">:</a> <a id="2554" href="SMT.Theory.Base.html#1762" class="Field">Sort</a><a id="2558" class="Symbol">)</a> <a id="2560" class="Symbol">→</a> <a id="2562" href="SMT.Theory.Base.html#2506" class="Field">Value</a> <a id="2568" href="SMT.Theory.Base.html#2550" class="Bound">σ</a> <a id="2570" class="Symbol">→</a> <a id="2572" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Rfl.Term</a>
    <a id="Theory.interpValue"></a><a id="2585" href="SMT.Theory.Base.html#2585" class="Field">interpValue</a> <a id="2597" class="Symbol">:</a> <a id="2599" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Rfl.Term</a> <a id="2608" class="Symbol">→</a> <a id="2610" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Rfl.Term</a>
</pre></body></html>